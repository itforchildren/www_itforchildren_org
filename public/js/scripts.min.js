jQuery(function(n){n(window).on("scroll",function(){var t=n(window).scrollTop()>n(".menu").innerHeight();n(".menu").toggleClass("menu--background",t),n(".logo").toggleClass("logo--small",t)}),n(".menu__item, .logo, .index .button").on("click",function(o){var a=n('.section[data-id="'+n(this).attr("href").substr(1)+'"]');a.length||(window.location.href=a),n("html,body").animate({scrollTop:a.offset().top-(n(window).innerWidth()>1024?98:62)}),n(".menu--open").length&&t(!1)}),n(".menu__pull").on("click",function(n){n.preventDefault(),t()}),n(".menu").on("click",function(n){n.stopPropagation()}),n(".page").on("click",function(){n(".menu--open").length&&t(!1)});var t=function(t){n(".menu").toggleClass("menu--open",t).one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n(".menu").toggleClass("menu--opened",n(".menu").hasClass("menu--open"))})};n(".modal, .lightbox__close").on("click",function(){o(!1)}),n(".lightbox__close").on("click",function(n){n.stopPropagation()}),n(".lightbox").on("click",function(t){t.stopPropagation(),n(".modal").hasClass("modal--visible")||n(".modal").removeClass("modal--closing")});var o=function(t){n(".modal").toggleClass("modal--visible",t).one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n(this).toggleClass("modal--closing",n(".modal").hasClass("modal--visible"))}),setTimeout(function(){n(".modal").toggleClass("modal--closing",!n(".modal").hasClass("modal--visible"))},1)},a=function(t){n(".lightbox__content").html(t).parent().scrollTop(0),o(!0)};n(".staff .button").on("click",function(t){t.preventDefault();var o=n(this).parents(".person"),e=n(".person__more",o),i=n(".person__img",o),l=n(".person__name",o).parent().clone();l.find(".person__button").remove();var s='<div class="grid"><div class="grid__item desk--one-third hidden--touch">'+i.parent().html()+'<div class="margin-top--double">'+l.html()+'</div></div><div class="grid__item desk--two-thirds">'+e.html()+"</div></div>";a(s)}),n(".donation__terms__link").on("click",function(t){t.preventDefault();var o=n(".terms").html();a(o)}),function(){var t=0,o=function(o){o.preventDefault();var a=n(o.target);switch(n(".donation__item").removeClass("donation__item--selected"),a.addClass("donation__item--selected"),o.target.type){case"button":t=a.data("amount");break;case"text":t=parseInt(a.val())||0}n(".donation__amount").val(t+"00"),n(".donation__ticketrule").val("rule"+t),n(".donation__more__item").removeClass("donation__more__item--current"),n(".donation__more__item--"+t).addClass("donation__more__item--current")};n(".donation__item").on("click",o),n(".donation__item--4").on("change",function(n){o.call(this,n)});var a=function(n){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(n)},e=function(t){var o=!1;n(".donation__field").removeClass("donation__field--error").each(function(){n(this).val().length||(o=!0,n(this).addClass("donation__field--error")),"email"===n(this).attr("type")&&n(this).val().length&&!a(n(this).val())&&(o=!0,n(this).addClass("donation__field--error"))}),o?t.preventDefault():window.ga&&ga("send","event","monthlyDonation","submit",n(".donation__amount").val())};n(".donation__form").on("submit",e),window._translations.en={donation:{}};var i=n("[data-translation]",n(".donate-money")).each(function(){var t=n(this).data("translation"),o=t.split("donation."),a="";switch(this.type){case"hidden":a=n(this).val();break;case"text":case"email":a=n(this).attr("placeholder");break;default:a=n(this).html()}window._translations.en.donation[o[1]]=a});n(".donation__language").on("click",function(){var t=n(this).data("language"),o=window._translations[t].donation;n(".donation__language").removeClass("donation__language--selected"),n(this).addClass("donation__language--selected"),i.each(function(){var t=n(this).data("translation"),a=t.split("donation.");switch(value=o[a[1]],this.type){case"hidden":n(this).val(value);break;case"text":case"email":n(this).attr("placeholder",value);break;default:n(this).html(value)}})})}();var e=function(t){t&&t.preventDefault();var o=""+window.location.hash,a=n('.menu__item[href="'+o+'"]');a.length&&a.trigger("click")};n(window).on("hashchange",e),e()});